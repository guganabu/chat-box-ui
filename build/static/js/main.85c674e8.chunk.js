(this["webpackJsonpchat-box-ui"]=this["webpackJsonpchat-box-ui"]||[]).push([[0],{51:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){},85:function(t,e,n){},91:function(t,e,n){},92:function(t,e,n){},93:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n.n(s),c=n(41),i=n.n(c),o=(n(51),n(52),n(45)),r=n(7),u=n(8),l=n(10),j=n(9),h=(n(53),n(42)),m=(new(function(){function t(){Object(r.a)(this,t),this.io=Object(h.io)("https://g-chat-box.herokuapp.com")}return Object(u.a)(t,[{key:"init",value:function(){this.io.on("connect",(function(){console.log("socket connected!")}))}}]),t}())).io,b=n(43),d=(n(85),new(n(109).a)),p=function(t){d.next(t)},f=function(){return d.asObservable()},O=a.a.createContext(),g=n(107),v=n(0),x=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).onKeyPress=function(t){13===t.charCode&&s.emit()},s.onInputchange=function(t){s.setState(Object(b.a)({},t.target.name,t.target.value))},s.emit=function(){m.emit(s.props.room,s._msgObject()),p(s._msgObject()),s.setState({inputMsg:""})},s.state={inputMsg:""},s}return Object(u.a)(n,[{key:"_msgObject",value:function(){return{actor:"self",data:{text:this.state.inputMsg,date_time:new Date,user_name:this.context.name}}}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"MsgInput",children:[Object(v.jsx)(g.a,{className:"MsgInput-icon",onClick:this.emit,children:"send"}),Object(v.jsx)("input",{type:"text",name:"inputMsg",className:"MsgInput-box",value:this.state.inputMsg,onKeyPress:this.onKeyPress,onChange:this.onInputchange})]})}}]),n}(a.a.Component);x.contextType=O;var N=x,C=(n(91),n(108)),y=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(r.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).scrollToBottom=function(){t.messagesEnd.scrollIntoView(!1)},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{className:"MsgList",children:[this.props.messages.map((function(t,e){return Object(v.jsxs)("div",{className:"MsgListItemContainer ".concat(t.actor),children:[Object(v.jsx)("div",{className:"UserName",children:"self"===t.actor?"You":t.data.user_name}),Object(v.jsx)("div",{className:"MsgListItem",children:Object(v.jsxs)("span",{className:"MsgListItemValue",children:[Object(v.jsx)("span",{className:"MsgListItemValueText",children:t.data.text}),Object(v.jsx)("span",{className:"MsgListItemValueTime",children:Object(C.a)(new Date(t.data.date_time),"p")})]})})]},e)})),Object(v.jsx)("div",{style:{float:"left",clear:"both"},ref:function(e){t.messagesEnd=e}})]})}}]),n}(a.a.Component),M=(n(92),function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).joinChat=function(){s.props.sendAction({name:s.state.inputName})},s.handleChange=function(t){s.setState({inputName:t.target.value})},s.state={inputName:""},s}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"UserPrefContainer",children:[Object(v.jsx)("div",{className:"InputContainer",children:Object(v.jsxs)("div",{className:"InputName",children:[Object(v.jsx)("span",{className:"Label",children:"Enter your name"}),Object(v.jsx)("input",{className:"Input",name:"inputName",value:this.state.inputName,onChange:this.handleChange})]})}),Object(v.jsx)("div",{className:"ActionContainer",children:Object(v.jsx)("button",{className:"Button",onClick:this.joinChat,children:"Join Chat"})})]})}}]),n}(a.a.Component)),I=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){var t;return Object(r.a)(this,n),(t=e.call(this)).captureUserPref=function(e){t.setState({isShowInitialState:!1,userPref:e})},t.state={messages:[],isShowInitialState:!0,userPref:{}},t.msgSubscription=null,t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.msgSubscription=f().subscribe((function(e){t.updateMsgs(e)})),m.on("private",(function(e){t.updateMsgs(e)}))}},{key:"componentWillUnmount",value:function(){this.msgSubscription.unsubscibe()}},{key:"updateMsgs",value:function(t){this.setState({messages:[].concat(Object(o.a)(this.state.messages),[t])})}},{key:"render",value:function(){return this.state.isShowInitialState?Object(v.jsx)(M,{sendAction:this.captureUserPref}):Object(v.jsx)("div",{className:"ChatWindow",children:Object(v.jsxs)(O.Provider,{value:this.state.userPref,children:[Object(v.jsx)(y,{messages:this.state.messages}),Object(v.jsx)(N,{room:"private",userPref:{}})]})})}}]),n}(a.a.Component);var k=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)("main",{className:"Main",children:Object(v.jsx)("div",{className:"ChatContainer",children:Object(v.jsx)(I,{})})})})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,110)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),s(t),a(t),c(t),i(t)}))};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(k,{})}),document.getElementById("root")),S()}},[[93,1,2]]]);
//# sourceMappingURL=main.85c674e8.chunk.js.map